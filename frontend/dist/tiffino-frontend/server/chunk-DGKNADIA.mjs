import './polyfills.server.mjs';
import{a as G}from"./chunk-UIYTH3FC.mjs";import"./chunk-6YWVIACV.mjs";import{b as B,d as j,f as W,n as D,o as U,q as H,u as Y}from"./chunk-DICKSK2H.mjs";import{A as E,Ac as z,Ca as i,Da as C,Ea as m,G as v,H as w,Ha as b,I as y,Ia as S,J as I,Ja as M,La as R,R as T,Y as N,Z as a,_,ga as x,ka as p,mb as k,oa as t,pa as n,pb as L,qa as c,rb as V,ta as A,va as g,wa as P,xa as F}from"./chunk-CGQJEPQN.mjs";import{a as f,b as h}from"./chunk-VVCT4QZE.mjs";function J(d,u){if(d&1&&(t(0,"option",18),i(1),n()),d&2){let e=u.$implicit;p("value",e.id),a(),C(e.name)}}function q(d,u){if(d&1&&(t(0,"option",18),i(1),n()),d&2){let e=u.$implicit;p("value",e.id),a(),C(e.name)}}function K(d,u){if(d&1){let e=A();t(0,"div",25),c(1,"img",26),t(2,"p")(3,"strong"),i(4,"Region:"),n(),i(5),n(),t(6,"p")(7,"strong"),i(8,"State:"),n(),i(9),n(),t(10,"h2",27),i(11),n(),t(12,"p"),c(13,"i",28),t(14,"strong"),i(15,"Meal Type:"),n(),i(16),n(),t(17,"p"),c(18,"i",29),t(19,"strong"),i(20,"Calories:"),n(),i(21),n(),t(22,"p"),c(23,"i",30),t(24,"strong"),i(25,"Carbs:"),n(),i(26),n(),t(27,"p"),c(28,"i",31),t(29,"strong"),i(30,"Fats:"),n(),i(31),n(),t(32,"p"),c(33,"i",32),t(34,"strong"),i(35,"Protein:"),n(),i(36),n(),t(37,"p"),c(38,"i",33),t(39,"strong"),i(40,"Spice Level:"),n(),i(41),n(),t(42,"p"),c(43,"i",34),t(44,"strong"),i(45,"Price Per Meal:"),n(),i(46),n(),t(47,"button",35),g("click",function(){let o=v(e).$implicit,l=P();return w(l.addToCart(o))}),y(),t(48,"svg",36),c(49,"path",37),n(),i(50,"Add to Cart"),n(),I(),t(51,"button",38),g("click",function(){let o=v(e).$implicit,l=P();return w(l.navigate(o.id))}),i(52,"View Product"),n()()}if(d&2){let e=u.$implicit;a(),F("alt",e.name),p("src",e.imageUrl,N),a(4),m(" ",e.regionName,""),a(4),m(" ",e.stateName,""),a(2),C(e.name),a(5),m(" ",e.meal_type||"N/A",""),a(5),m(" ",e.calories||"N/A",""),a(5),m(" ",e.carbs||"N/A",""),a(5),m(" ",e.fats||"N/A",""),a(5),m(" ",e.protein||"N/A",""),a(5),m(" ",e.spice_level||"N/A",""),a(5),m(" \u20B9",e.price_per_meal,"")}}var ae=(()=>{class d{constructor(e,r,o){this.cs=e,this.route=r,this.platformId=o,this.regions=[],this.states=[],this.cusines=[],this.allCuisines=[],this.selectedRegionId=null,this.selectedStateId=null,this.showPopup=!1,this.isFilterOpen=!1,this.searchTerm="",this.isBrowser=V(this.platformId)}ngOnInit(){if(this.isBrowser){let e=localStorage.getItem("user");if(e)try{let r=JSON.parse(e);this.userId=r?.id||r?.user?.id}catch(r){console.error("Error parsing localStorage user:",r)}}this.getRegions(),this.cs.getAllRegions().subscribe(e=>{this.regions=e,this.cs.getAllStates().subscribe(r=>{this.states=r,console.log(r),this.loadCuisines()})})}loadCuisines(){this.cs.allcusines().subscribe(e=>{this.allCuisines=e.map(r=>{let o=this.states.find(s=>s.id===r.stateId),l=o?this.regions.find(s=>s.id===o.regionId):null;return h(f({},r),{stateName:o?.name||"N/A",regionName:l?.name||"N/A"})}),this.cusines=this.allCuisines})}getRegions(){this.cs.getAllRegions().subscribe(e=>{this.regions=e})}onRegionChange(){this.states=[],this.selectedStateId=null,this.selectedRegionId&&this.cs.getStatesByRegion(this.selectedRegionId).subscribe(e=>{this.states=e;let r=this.allCuisines.filter(o=>o.regionId===this.selectedRegionId);this.cusines=r.map(o=>{let l=this.states.find(O=>O.id===o.stateId),s=this.regions.find(O=>O.id===o.regionId);return h(f({},o),{stateName:l?.name||"N/A",regionName:s?.name||"N/A"})})})}onStateChange(){this.selectedStateId&&this.cs.getCuisinesByState(this.selectedStateId).subscribe(e=>{console.log(e),this.cusines=e.map(r=>{let o=this.states.find(s=>s.id===r.stateId),l=this.regions.find(s=>s.id===o?.regionId);return h(f({},r),{stateName:o?.name||"N/A",regionName:l?.name||"N/A"})})})}applySearch(){let e=this.searchTerm.toLowerCase();this.cusines=this.allCuisines.filter(r=>r.name.toLowerCase().includes(e)||r.stateName.toLowerCase().includes(e)||r.meal_type.toLowerCase().includes(e)||r.regionName.toLowerCase().includes(e)||r.regionName.toLowerCase().includes(e))}clearFilter(){this.selectedRegionId=null,this.selectedStateId=null,this.cusines=this.allCuisines}navigate(e){this.route.navigate(["/cusineinfo",e])}addToCart(e){let r=e.id;this.cs.addToCart(this.userId,r,1).subscribe({next:()=>{this.showPopup=!0,this.cs.updateCartLengthFromServer(this.userId)},error:()=>{alert("Failed to add item")}})}static{this.\u0275fac=function(r){return new(r||d)(_(G),_(z),_(T))}}static{this.\u0275cmp=E({type:d,selectors:[["app-order-tracking"]],standalone:!0,features:[R],decls:56,vars:8,consts:[[1,"card-container","mt-4","rounded-3"],[1,"offer-card"],[1,"sub"],[1,"offer"],["src","https://cdn-icons-png.flaticon.com/512/3075/3075977.png","alt","food",1,"card-img"],[1,"arrow"],["src","https://cdn-icons-png.flaticon.com/512/590/590685.png","alt","grocery",1,"card-img"],["src","https://cdn-icons-png.flaticon.com/512/814/814469.png","alt","dine",1,"card-img"],[1,"controls","mt-4"],[1,"search-wrapper"],[1,"bi","bi-search","search-icon"],["type","text","placeholder","Search cuisine or state .....",3,"ngModelChange","input","ngModel"],[1,"page-layout"],[1,"filter-card"],[1,"card","shadow-sm","p-3","bg-white","rounded","border","border-3",2,"width","100%"],[1,"card-body"],[1,"card-title","mt-2"],[1,"form-select","w-100","mb-3",3,"ngModelChange","change","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"card-title"],[1,"btn","btn-outline-danger","mt-3","w-100",3,"click"],[1,"meal-container"],[1,"meal_type"],["class","meal-card",4,"ngFor","ngForOf"],[1,"meal-card"],[3,"src","alt"],[1,"title"],[1,"bi","bi-list-ul"],[1,"bi","bi-fire"],[1,"bi","bi-battery-half"],[1,"bi","bi-droplet"],[1,"bi","bi-weight"],[1,"bi","bi-thermometer"],[1,"bi","bi-currency-rupee"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","black","viewBox","0 0 16 16",1,"bi","bi-cart-plus-fill"],["d","M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0m7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0M9 5.5V7h1.5a.5.5 0 0 1 0 1H9v1.5a.5.5 0 0 1-1 0V8H6.5a.5.5 0 0 1 0-1H8V5.5a.5.5 0 0 1 1 0"],[1,"ms-3",3,"click"]],template:function(r,o){r&1&&(t(0,"div",0)(1,"div",1)(2,"h3"),i(3,"FOOD DELIVERY"),n(),t(4,"p",2),i(5,"FROM RESTAURANTS"),n(),t(6,"span",3),i(7,"UPTO 60% OFF"),n(),c(8,"img",4),t(9,"div",5),i(10,"\u2192"),n()(),t(11,"div",1)(12,"h3"),i(13,"INSTANT DELIVERY"),n(),t(14,"p",2),i(15,"INSTANT Delivery"),n(),t(16,"span",3),i(17,"UPTO 60% OFF"),n(),c(18,"img",6),t(19,"div",5),i(20,"\u2192"),n()(),t(21,"div",1)(22,"h3"),i(23,"DINEOUT"),n(),t(24,"p",2),i(25,"EAT OUT & SAVE MORE"),n(),t(26,"span",3),i(27,"UPTO 50% OFF"),n(),c(28,"img",7),t(29,"div",5),i(30,"\u2192"),n()()(),t(31,"div",8)(32,"div",9),c(33,"i",10),t(34,"input",11),M("ngModelChange",function(s){return S(o.searchTerm,s)||(o.searchTerm=s),s}),g("input",function(){return o.applySearch()}),n()()(),t(35,"div",12)(36,"div",13)(37,"div",14)(38,"div",15)(39,"h5",16),i(40,"Filter by Region"),n(),t(41,"select",17),M("ngModelChange",function(s){return S(o.selectedRegionId,s)||(o.selectedRegionId=s),s}),g("change",function(){return o.onRegionChange()}),t(42,"option",18),i(43,"-- Select Region --"),n(),x(44,J,2,2,"option",19),n(),t(45,"h5",20),i(46,"Filter by state"),n(),t(47,"select",17),M("ngModelChange",function(s){return S(o.selectedStateId,s)||(o.selectedStateId=s),s}),g("change",function(){return o.onStateChange()}),t(48,"option",18),i(49,"-- Select State --"),n(),x(50,q,2,2,"option",19),n(),t(51,"button",21),g("click",function(){return o.clearFilter()}),i(52,"Clear Filters"),n()()()(),t(53,"div",22)(54,"div",23),x(55,K,53,12,"div",24),n()()()),r&2&&(a(34),b("ngModel",o.searchTerm),a(7),b("ngModel",o.selectedRegionId),a(),p("value",null),a(2),p("ngForOf",o.regions),a(3),b("ngModel",o.selectedStateId),a(),p("value",null),a(2),p("ngForOf",o.states),a(5),p("ngForOf",o.cusines))},dependencies:[L,k,Y,U,H,B,D,j,W],styles:[".controls[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;margin-bottom:15px;margin-left:400px}.search-wrapper[_ngcontent-%COMP%]{position:relative;width:50%;transition:transform .25s ease}.search-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 14px 10px 38px;border:1px solid #e0e0e0;border-radius:6px;font-size:14px;transition:border-color .2s,box-shadow .2s}.search-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#00a86b;box-shadow:0 0 6px #00a86b4d}.search-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:12px;transform:translateY(-50%);font-size:16px;color:#888}.search-wrapper[_ngcontent-%COMP%]:focus-within{transform:scale(1.03)}.popup[_ngcontent-%COMP%]{position:fixed;bottom:100px;right:300px;background:#2ecc71;color:#fff;padding:12px 18px;border-radius:6px}.popup[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;margin-left:8px}.offcanvas.open[_ngcontent-%COMP%]{right:0}.filter-buttons[_ngcontent-%COMP%]{margin-top:20px;display:flex;gap:10px}.meal_type[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:20px}.meal-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:12px;box-shadow:0 2px 6px #0000001a;text-align:left}.meal-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:160px;object-fit:cover;border-radius:6px;margin-bottom:8px}.meal-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:6px;padding:6px 12px;border:none;background:#df8d01;color:#fff;border-radius:4px;cursor:pointer}.offcanvas[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:8px;margin-bottom:12px;background:#2d2d2d;border:1px solid #444;color:#fff;border-radius:4px}.filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:8px;border:none;border-radius:4px;cursor:pointer}.filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{background:#555;color:#fff}.filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{background:#00b36b;color:#fff}[_nghost-%COMP%]{display:block;width:100vw;margin:0;padding:0}#carouselExampleAutoplaying[_ngcontent-%COMP%]{width:100%}.carousel-img[_ngcontent-%COMP%]{height:300px;object-fit:cover}.carousel-img[_ngcontent-%COMP%]{height:300px;object-fit:cover;border-radius:40px}@media (max-width: 768px){.carousel-img[_ngcontent-%COMP%]{height:200px}}.card-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;background-color:#ff6200;padding:40px 20px;flex-wrap:wrap;gap:20px}.offer-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:50px;padding:16px;width:280px;text-align:left;position:relative;box-shadow:0 4px 12px #0000001a;transition:transform .3s ease}.offer-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:10px}.offer-card[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:8px}.offer-card[_ngcontent-%COMP%]   .offer[_ngcontent-%COMP%]{font-size:1.2rem;color:#ff6200;margin-bottom:12px}.offer-card[_ngcontent-%COMP%]   .card-img[_ngcontent-%COMP%]{max-height:100px;margin-bottom:16px}.offer-card[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{position:absolute;bottom:16px;right:16px;font-size:1.5rem;color:#ff6200}.card[_ngcontent-%COMP%]{border:none;transition:transform .2s ease-in-out}.card[_ngcontent-%COMP%]:hover{transform:scale(1.03)}.card-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600}.badge[_ngcontent-%COMP%]{font-size:.8rem;padding:.4em .6em}.card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:500}.form-check-label[_ngcontent-%COMP%]{margin-left:.5em}.page-layout[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%}.filter-card[_ngcontent-%COMP%]{width:250px;flex-shrink:0}.meal-container[_ngcontent-%COMP%]{flex:1}"]})}}return d})();export{ae as CusinefilterComponent};
